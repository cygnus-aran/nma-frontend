<header class="header" xmlns="http://www.w3.org/1999/html">
  <!-- NAVBAR -->
  <nav class="navbar">
    <!-- LOGO -->
    <div class="logo">
      <img src="assets/images/logo-nma.gif" alt="Logo NMA" style="width: 96px; height: 42px"/>
    </div>
    <div class="options float-start">
      <a *ngIf="this.dataService.usuarioObservado.rol == '1'" [routerLink]="['/home']" class="text-decoration-none">Inicio</a>
      <a *ngIf="this.dataService.usuarioObservado.rol == '1'" [routerLink]="['/home']" class="text-decoration-none">Usuarios</a>
      <a *ngIf="this.dataService.usuarioObservado.rol == '1' || this.dataService.usuarioObservado.rol == '3'" [routerLink]="['/home']" class="text-decoration-none">Clientes</a>
      <a [routerLink]="['/factura']" class="text-decoration-none">Facturas</a>
      <a *ngIf="this.dataService.usuarioObservado.rol == '2'" [routerLink]="['/home']" class="text-decoration-none">Reportar Accidente</a>
      <a *ngIf="this.dataService.usuarioObservado.rol == '2'" [routerLink]="['/home']" class="text-decoration-none">Solicitar Asesoria</a>
    </div>
    <div class="close-sesion right">
      <button class="btn-close-sesion" (click)="logOut()">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M14.0625 1.90195C16.2774 3.48398 17.7188 6.07148 17.7188 9C17.7188 13.8094 13.8234 17.7082 9.01758 17.7188C4.21876 17.7293 0.288288 13.8164 0.281256 9.01406C0.277741 6.08555 1.71915 3.49102 3.93048 1.90547C4.3418 1.61367 4.91485 1.73672 5.16094 2.17617L5.71641 3.16406C5.92383 3.5332 5.8254 4.00078 5.48438 4.25391C4.0254 5.33672 3.09376 7.05234 3.09376 8.99648C3.09024 12.2414 5.7129 14.9062 9.00001 14.9062C12.2203 14.9062 14.9274 12.2977 14.9063 8.96133C14.8957 7.14023 14.0379 5.38242 12.5121 4.25039C12.1711 3.99727 12.0762 3.52969 12.2836 3.16406L12.8391 2.17617C13.0852 1.74023 13.6547 1.61016 14.0625 1.90195ZM10.4063 9.28125V0.84375C10.4063 0.376172 10.0301 0 9.56251 0H8.43751C7.96993 0 7.59376 0.376172 7.59376 0.84375V9.28125C7.59376 9.74883 7.96993 10.125 8.43751 10.125H9.56251C10.0301 10.125 10.4063 9.74883 10.4063 9.28125Z" fill="#FFFFFF"/>
        </svg>
        <span class="span-close">
            <a href="#" class="text-decoration-none">Cerrar sesi&oacute;n</a>
        </span>
      </button>
    </div>
  </nav>
</header>
<div class="wrapper pt-3">
  <div class="row">
    <div class="col-6">
      <h1 class="left title pb-4">Gesti&oacute;n de Clientes</h1>
    </div>
    <div class="col-6">
    </div>
  </div>
  <div class="row pt-3">
    <div class="col-4"></div>
    <div class="col-4"></div>
    <div class="col-4">
      <button class="btn-green-form shadow-none float-end" style="width: 205px; margin-right: 0.5rem; margin-bottom: 0.5rem;" (click)="openModal(crearContrato)">AÃ±adir Contrato</button>
      <button class="btn-green-form shadow-none float-end" style="width: 205px; margin-right: 0.5rem; margin-bottom: 0.5rem;" (click)="openModal(agendarVisita)">Agendar Visita</button>
      <button class="btn-green-form shadow-none float-end" style="width: 205px; margin-right: 0.5rem; margin-bottom: 0.5rem;" (click)="openModal(agendarCapacitacion)">Agendar Capacitaci&oacute;n</button>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <h4 class="title-blue pb-2 pt-2">Visitas</h4>
    </div>
  </div>
  <div class="row">
    <div class="col-12" style="padding-left: 10%; padding-right: 10%;">
      <div class="border-tabla mb-3">
        <table class="table text-center tabla-desktop-admuser mb-0 table-hover d-md-table d-none" style="text-align: center; border-radius: 10px" aria-describedby="tabla-integradores">
          <thead>
          <tr class="bg-2 color-1">
            <th scope="col">Visita</th>
            <th scope="col">Fecha Visita</th>
            <th scope="col">Valor Visita</th>
            <th scope="col">Descripci&oacute;n</th>
            <th scope="col">Encargado</th>
            <th scope="col">Estado</th>
            <th scope="col">Cliente</th>
            <th scope="col">Checklist</th>
            <th scope="col">Actividad de Mejora</th>
            <th scope="col"></th>
          </tr>
          </thead>
          <tbody class="admuser">
          <tr *ngFor="let vs of this.vsts" class="back-tab-user">
            <td *ngIf="vs.estado === 'A' && vs.idEmpresa == this.dataService.clienteObservado.idEmpresa.toString()" id="{{vs.idVisita}}a">{{vs.idVisita}}</td>
            <td *ngIf="vs.estado === 'A' && vs.idEmpresa == this.dataService.clienteObservado.idEmpresa.toString()" id="{{vs.idVisita}}b">{{vs.fechaVisita | date:"dd-MM-yyyy"}}</td>
            <td *ngIf="vs.estado === 'A' && vs.idEmpresa == this.dataService.clienteObservado.idEmpresa.toString()" id="{{vs.idVisita}}b">{{vs.valor | currency:"CLP"}}</td>
            <td *ngIf="vs.estado === 'A' && vs.idEmpresa == this.dataService.clienteObservado.idEmpresa.toString()" id="{{vs.idVisita}}c">{{vs.descripcionVisita}}</td>
            <td *ngIf="vs.estado === 'A' && vs.idEmpresa == this.dataService.clienteObservado.idEmpresa.toString()" id="{{vs.idVisita}}d">{{vs.nombreProfesional}}</td>
            <td *ngIf="vs.estado === 'A' && vs.idEmpresa == this.dataService.clienteObservado.idEmpresa.toString()" id="{{vs.idVisita}}e">{{vs.estado}}</td>
            <td *ngIf="vs.estado === 'A' && vs.idEmpresa == this.dataService.clienteObservado.idEmpresa.toString()" id="{{vs.idVisita}}f">{{vs.idEmpresa}}</td>
            <td *ngIf="vs.estado === 'A' && vs.idEmpresa == this.dataService.clienteObservado.idEmpresa.toString()" id="{{vs.idVisita}}h">
              <svg fill="#17B1E7" height="27" width="27" id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="cursor:pointer;" (click)="openModal(crearChecklist); selectVisita(vs)">
                <g>
                  <g>
                    <path d="M79.428,34.643H22.737C10.179,34.643,0,44.822,0,57.379v56.692c0,12.557,10.179,22.737,22.737,22.737h56.692
                      c12.557,0,22.737-10.179,22.737-22.737V57.379C102.165,44.822,91.986,34.643,79.428,34.643z M80.016,113.337l-57.313-0.033V56.611
                      l0.621-0.033l56.725,0.033L80.016,113.337z"/>
                  </g>
                </g>
                <g>
                  <g>
                    <path d="M500.648,68.698h-340.55c-6.275,0-11.352,5.077-11.352,11.352c0,6.274,5.077,11.352,11.352,11.352h340.55
                      c6.274,0,11.352-5.077,11.352-11.352C512,73.775,506.923,68.698,500.648,68.698z"/>
                  </g>
                </g>
                <g>
                  <g>
                    <path d="M79.428,204.918H22.737C10.179,204.918,0,215.097,0,227.654v56.692c0,12.557,10.179,22.737,22.737,22.737h56.692
                      c12.557,0,22.737-10.179,22.737-22.737v-56.692C102.165,215.097,91.986,204.918,79.428,204.918z M80.016,283.612l-57.313-0.033
                      v-56.692l0.621-0.033l56.725,0.033L80.016,283.612z"/>
                  </g>
                </g>
                <g>
                  <g>
                    <path d="M500.648,238.973h-340.55c-6.275,0-11.352,5.077-11.352,11.352s5.077,11.352,11.352,11.352h340.55
                      c6.274,0,11.352-5.077,11.352-11.352S506.923,238.973,500.648,238.973z"/>
                  </g>
                </g>
                <g>
                  <g>
                    <path d="M79.428,375.192H22.737C10.179,375.192,0,385.372,0,397.929v56.692c0,12.557,10.179,22.737,22.737,22.737h56.692
                      c12.557,0,22.737-10.179,22.737-22.737v-56.692C102.165,385.372,91.986,375.192,79.428,375.192z M80.016,453.886l-57.313-0.033
                      v-56.692l0.621-0.033l56.725,0.033L80.016,453.886z"/>
                  </g>
                </g>
                <g>
                  <g>
                    <path d="M500.648,409.247h-340.55c-6.275,0-11.352,5.077-11.352,11.352s5.077,11.352,11.352,11.352h340.55
                      c6.274,0,11.352-5.077,11.352-11.352S506.923,409.247,500.648,409.247z"/>
                  </g>
                </g>
              </svg>
            </td>
            <td *ngIf="vs.estado === 'A' && vs.idEmpresa == this.dataService.clienteObservado.idEmpresa.toString()" id="{{vs.idVisita}}i">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" (click)="goToActividad(vs)" style="cursor: pointer">
                <path d="M9.16667 15.8333C12.8486 15.8333 15.8333 12.8486 15.8333 9.16667C15.8333 5.48477 12.8486 2.5 9.16667 2.5C5.48477 2.5 2.5 5.48477 2.5 9.16667C2.5 12.8486 5.48477 15.8333 9.16667 15.8333Z" stroke="#17B1E7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M17.5 17.5L13.875 13.875" stroke="#17B1E7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </td>
            <td *ngIf="vs.estado === 'A' && vs.idEmpresa == this.dataService.clienteObservado.idEmpresa.toString()" id="{{vs.idVisita}}g">
              <svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_78915_12021)">
                  <path d="M17.2241 9.78214C16.8749 9.78214 16.5918 10.0652 16.5918 10.4145V22.3652C16.5918 22.7142 16.8749 22.9976 17.2241 22.9976C17.5734 22.9976 17.8564 22.7142 17.8564 22.3652V10.4145C17.8564 10.0652 17.5734 9.78214 17.2241 9.78214Z" fill="#17B1E7"/>
                  <path d="M9.76318 9.78214C9.41392 9.78214 9.13086 10.0652 9.13086 10.4145V22.3652C9.13086 22.7142 9.41392 22.9976 9.76318 22.9976C10.1124 22.9976 10.3955 22.7142 10.3955 22.3652V10.4145C10.3955 10.0652 10.1124 9.78214 9.76318 9.78214Z" fill="#17B1E7"/>
                  <path d="M4.32518 8.03808V23.617C4.32518 24.5378 4.66283 25.4026 5.25266 26.023C5.83977 26.6452 6.65685 26.9984 7.51196 26.9999H19.4756C20.3309 26.9984 21.148 26.6452 21.7349 26.023C22.3247 25.4026 22.6624 24.5378 22.6624 23.617V8.03808C23.8349 7.72687 24.5946 6.59413 24.4378 5.391C24.2807 4.18812 23.2559 3.2883 22.0426 3.28805H18.8052V2.49766C18.8089 1.83298 18.5461 1.19474 18.0756 0.725195C17.6051 0.255897 16.9658 -0.00542718 16.3012 6.78727e-06H10.6864C10.0217 -0.00542718 9.38248 0.255897 8.91194 0.725195C8.44141 1.19474 8.17861 1.83298 8.18231 2.49766V3.28805H4.9449C3.73164 3.2883 2.70684 4.18812 2.54975 5.391C2.39291 6.59413 3.15268 7.72687 4.32518 8.03808ZM19.4756 25.7353H7.51196C6.43084 25.7353 5.58981 24.8066 5.58981 23.617V8.09366H21.3977V23.617C21.3977 24.8066 20.5567 25.7353 19.4756 25.7353ZM9.44694 2.49766C9.44274 2.16841 9.57217 1.85151 9.80583 1.61908C10.0392 1.38666 10.3569 1.25896 10.6864 1.26464H16.3012C16.6307 1.25896 16.9483 1.38666 17.1817 1.61908C17.4154 1.85126 17.5448 2.16841 17.5406 2.49766V3.28805H9.44694V2.49766ZM4.9449 4.55269H22.0426C22.6713 4.55269 23.1808 5.06224 23.1808 5.69086C23.1808 6.31947 22.6713 6.82903 22.0426 6.82903H4.9449C4.31629 6.82903 3.80673 6.31947 3.80673 5.69086C3.80673 5.06224 4.31629 4.55269 4.9449 4.55269Z" fill="#17B1E7"/>
                  <path d="M13.4936 9.78214C13.1444 9.78214 12.8613 10.0652 12.8613 10.4145V22.3652C12.8613 22.7142 13.1444 22.9976 13.4936 22.9976C13.8429 22.9976 14.126 22.7142 14.126 22.3652V10.4145C14.126 10.0652 13.8429 9.78214 13.4936 9.78214Z" fill="#17B1E7"/>
                </g>
                <defs>
                  <clipPath id="clip0_78915_12021">
                    <rect width="27" height="27" fill="white"/>
                  </clipPath>
                </defs>
              </svg>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <h4 class="title-blue pb-2 pt-2">Contratos</h4>
    </div>
  </div>
  <div class="row">
    <div class="col-12" style="padding-left: 10%; padding-right: 10%;">
      <div class="border-tabla mb-3">
        <table class="table text-center tabla-desktop-admuser mb-0 table-hover d-md-table d-none" style="text-align: center; border-radius: 10px" aria-describedby="tabla-integradores">
          <thead>
          <tr class="bg-2 color-1">
            <th scope="col">Contrato</th>
            <th scope="col">Fecha Contrato</th>
            <th scope="col">Estado Contrato</th>
            <th scope="col">Cliente</th>
            <th scope="col">Visitas</th>
            <th scope="col">Capacitaciones</th>
            <th scope="col">Cobrar Contrato</th>
            <th scope="col"></th>
          </tr>
          </thead>
          <tbody class="admuser">
          <tr *ngFor="let ct of this.dataService.listContracts" class="back-tab-user">
            <td *ngIf="ct.estadoContrato === 'A' && ct.idClienteContrato == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ct.idContrato}}a">{{ct.idContrato}}</td>
            <td *ngIf="ct.estadoContrato === 'A' && ct.idClienteContrato == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ct.idContrato}}b">{{ct.fechaContrato | date:"dd-MM-yyyy"}}</td>
            <td *ngIf="ct.estadoContrato === 'A' && ct.idClienteContrato == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ct.idContrato}}c">{{ct.estadoContrato}}</td>
            <td *ngIf="ct.estadoContrato === 'A' && ct.idClienteContrato == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ct.idContrato}}d">{{ct.idClienteContrato}}</td>
            <td *ngIf="ct.estadoContrato === 'A' && ct.idClienteContrato == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ct.idContrato}}d">{{ct.cantidadVisita}}</td>
            <td *ngIf="ct.estadoContrato === 'A' && ct.idClienteContrato == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ct.idContrato}}d">{{ct.cantidadServicio}}</td>
            <td *ngIf="ct.estadoContrato === 'A' && ct.idClienteContrato == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ct.idContrato}}d">
              <svg fill="#000000" width="27" height="27" viewBox="0 0 24 24" id="stamp" data-name="Line Color" xmlns="http://www.w3.org/2000/svg" class="icon line-color" style="cursor: pointer" (click)="openModal(warnContrato); prepContrato(ct)">
                <rect id="secondary" x="7" y="20" width="10" height="1" style="fill: none; stroke: rgb(44, 169, 188); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></rect>
                <path id="primary" d="M18,20H6V17a1,1,0,0,1,1-1H17a1,1,0,0,1,1,1ZM16,7A4,4,0,1,0,8.45,8.84,12.64,12.64,0,0,1,10,14.72V16h4V14.48a12.33,12.33,0,0,1,1.56-5.66A4,4,0,0,0,16,7Z" style="fill: none; stroke: #17B1E7; stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path>
              </svg>
            </td>
            <td *ngIf="ct.estadoContrato === 'A' && ct.idClienteContrato == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ct.idContrato}}e">
              <svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_78915_12021)">
                  <path d="M17.2241 9.78214C16.8749 9.78214 16.5918 10.0652 16.5918 10.4145V22.3652C16.5918 22.7142 16.8749 22.9976 17.2241 22.9976C17.5734 22.9976 17.8564 22.7142 17.8564 22.3652V10.4145C17.8564 10.0652 17.5734 9.78214 17.2241 9.78214Z" fill="#17B1E7"/>
                  <path d="M9.76318 9.78214C9.41392 9.78214 9.13086 10.0652 9.13086 10.4145V22.3652C9.13086 22.7142 9.41392 22.9976 9.76318 22.9976C10.1124 22.9976 10.3955 22.7142 10.3955 22.3652V10.4145C10.3955 10.0652 10.1124 9.78214 9.76318 9.78214Z" fill="#17B1E7"/>
                  <path d="M4.32518 8.03808V23.617C4.32518 24.5378 4.66283 25.4026 5.25266 26.023C5.83977 26.6452 6.65685 26.9984 7.51196 26.9999H19.4756C20.3309 26.9984 21.148 26.6452 21.7349 26.023C22.3247 25.4026 22.6624 24.5378 22.6624 23.617V8.03808C23.8349 7.72687 24.5946 6.59413 24.4378 5.391C24.2807 4.18812 23.2559 3.2883 22.0426 3.28805H18.8052V2.49766C18.8089 1.83298 18.5461 1.19474 18.0756 0.725195C17.6051 0.255897 16.9658 -0.00542718 16.3012 6.78727e-06H10.6864C10.0217 -0.00542718 9.38248 0.255897 8.91194 0.725195C8.44141 1.19474 8.17861 1.83298 8.18231 2.49766V3.28805H4.9449C3.73164 3.2883 2.70684 4.18812 2.54975 5.391C2.39291 6.59413 3.15268 7.72687 4.32518 8.03808ZM19.4756 25.7353H7.51196C6.43084 25.7353 5.58981 24.8066 5.58981 23.617V8.09366H21.3977V23.617C21.3977 24.8066 20.5567 25.7353 19.4756 25.7353ZM9.44694 2.49766C9.44274 2.16841 9.57217 1.85151 9.80583 1.61908C10.0392 1.38666 10.3569 1.25896 10.6864 1.26464H16.3012C16.6307 1.25896 16.9483 1.38666 17.1817 1.61908C17.4154 1.85126 17.5448 2.16841 17.5406 2.49766V3.28805H9.44694V2.49766ZM4.9449 4.55269H22.0426C22.6713 4.55269 23.1808 5.06224 23.1808 5.69086C23.1808 6.31947 22.6713 6.82903 22.0426 6.82903H4.9449C4.31629 6.82903 3.80673 6.31947 3.80673 5.69086C3.80673 5.06224 4.31629 4.55269 4.9449 4.55269Z" fill="#17B1E7"/>
                  <path d="M13.4936 9.78214C13.1444 9.78214 12.8613 10.0652 12.8613 10.4145V22.3652C12.8613 22.7142 13.1444 22.9976 13.4936 22.9976C13.8429 22.9976 14.126 22.7142 14.126 22.3652V10.4145C14.126 10.0652 13.8429 9.78214 13.4936 9.78214Z" fill="#17B1E7"/>
                </g>
                <defs>
                  <clipPath id="clip0_78915_12021">
                    <rect width="27" height="27" fill="white"/>
                  </clipPath>
                </defs>
              </svg>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <h4 class="title-blue pb-2 pt-2">Accidentes Reportados</h4>
    </div>
  </div>
  <div class="row">
    <div class="col-12" style="padding-left: 10%; padding-right: 10%;">
      <div class="border-tabla mb-3">
        <table class="table text-center tabla-desktop-admuser mb-0 table-hover d-md-table d-none" style="text-align: center; border-radius: 10px" aria-describedby="tabla-integradores">
          <thead>
          <tr class="bg-2 color-1">
            <th scope="col">Folio</th>
            <th scope="col">Fecha Accidente</th>
            <th scope="col">Region</th>
            <th scope="col">Accion Insegura</th>
            <th scope="col">Condicion Insegura</th>
            <th scope="col">Fecha Informe</th>
            <th scope="col">Fecha Revision</th>
            <th scope="col">Cliente</th>
            <th scope="col"></th>
          </tr>
          </thead>
          <tbody class="admuser">
          <tr *ngFor="let ep of this.eps" class="back-tab-user">
            <td *ngIf="ep.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ep.folio}}a">{{ep.folio}}</td>
            <td *ngIf="ep.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ep.folio}}b">{{ep.fechaEpisodio | date:"dd-MM-yyyy"}}</td>
            <td *ngIf="ep.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ep.folio}}c">{{ep.region}}</td>
            <td *ngIf="ep.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ep.folio}}d">{{ep.accionInsegura}}</td>
            <td *ngIf="ep.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ep.folio}}e">{{ep.condicionInsegura}}</td>
            <td *ngIf="ep.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ep.folio}}f">{{ep.fechaEpisodio | date:"dd-MM-yyyy" }}</td>
            <td *ngIf="ep.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ep.folio}}g">{{ep.fechaRevision | date:"dd-MM-yyyy"}}</td>
            <td *ngIf="ep.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ep.folio}}g">{{ep.idCliente}}</td>
            <td *ngIf="ep.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{ep.folio}}h">
              <svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_78915_12021)">
                  <path d="M17.2241 9.78214C16.8749 9.78214 16.5918 10.0652 16.5918 10.4145V22.3652C16.5918 22.7142 16.8749 22.9976 17.2241 22.9976C17.5734 22.9976 17.8564 22.7142 17.8564 22.3652V10.4145C17.8564 10.0652 17.5734 9.78214 17.2241 9.78214Z" fill="#17B1E7"/>
                  <path d="M9.76318 9.78214C9.41392 9.78214 9.13086 10.0652 9.13086 10.4145V22.3652C9.13086 22.7142 9.41392 22.9976 9.76318 22.9976C10.1124 22.9976 10.3955 22.7142 10.3955 22.3652V10.4145C10.3955 10.0652 10.1124 9.78214 9.76318 9.78214Z" fill="#17B1E7"/>
                  <path d="M4.32518 8.03808V23.617C4.32518 24.5378 4.66283 25.4026 5.25266 26.023C5.83977 26.6452 6.65685 26.9984 7.51196 26.9999H19.4756C20.3309 26.9984 21.148 26.6452 21.7349 26.023C22.3247 25.4026 22.6624 24.5378 22.6624 23.617V8.03808C23.8349 7.72687 24.5946 6.59413 24.4378 5.391C24.2807 4.18812 23.2559 3.2883 22.0426 3.28805H18.8052V2.49766C18.8089 1.83298 18.5461 1.19474 18.0756 0.725195C17.6051 0.255897 16.9658 -0.00542718 16.3012 6.78727e-06H10.6864C10.0217 -0.00542718 9.38248 0.255897 8.91194 0.725195C8.44141 1.19474 8.17861 1.83298 8.18231 2.49766V3.28805H4.9449C3.73164 3.2883 2.70684 4.18812 2.54975 5.391C2.39291 6.59413 3.15268 7.72687 4.32518 8.03808ZM19.4756 25.7353H7.51196C6.43084 25.7353 5.58981 24.8066 5.58981 23.617V8.09366H21.3977V23.617C21.3977 24.8066 20.5567 25.7353 19.4756 25.7353ZM9.44694 2.49766C9.44274 2.16841 9.57217 1.85151 9.80583 1.61908C10.0392 1.38666 10.3569 1.25896 10.6864 1.26464H16.3012C16.6307 1.25896 16.9483 1.38666 17.1817 1.61908C17.4154 1.85126 17.5448 2.16841 17.5406 2.49766V3.28805H9.44694V2.49766ZM4.9449 4.55269H22.0426C22.6713 4.55269 23.1808 5.06224 23.1808 5.69086C23.1808 6.31947 22.6713 6.82903 22.0426 6.82903H4.9449C4.31629 6.82903 3.80673 6.31947 3.80673 5.69086C3.80673 5.06224 4.31629 4.55269 4.9449 4.55269Z" fill="#17B1E7"/>
                  <path d="M13.4936 9.78214C13.1444 9.78214 12.8613 10.0652 12.8613 10.4145V22.3652C12.8613 22.7142 13.1444 22.9976 13.4936 22.9976C13.8429 22.9976 14.126 22.7142 14.126 22.3652V10.4145C14.126 10.0652 13.8429 9.78214 13.4936 9.78214Z" fill="#17B1E7"/>
                </g>
                <defs>
                  <clipPath id="clip0_78915_12021">
                    <rect width="27" height="27" fill="white"/>
                  </clipPath>
                </defs>
              </svg>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <h4 class="title-blue pb-2 pt-2">Capacitaciones</h4>
    </div>
  </div>
  <div class="row">
    <div class="col-12" style="padding-left: 10%; padding-right: 10%;">
      <div class="border-tabla mb-3">
        <table class="table text-center tabla-desktop-admuser mb-0 table-hover d-md-table d-none" style="text-align: center; border-radius: 10px" aria-describedby="tabla-integradores">
          <thead>
          <tr class="bg-2 color-1">
            <th scope="col">Capacitaci&oacute;n</th>
            <th scope="col">Nombre</th>
            <th scope="col">Valor</th>
            <th scope="col">Descripci&oacute;n</th>
            <th scope="col">Fecha Creaci&oacute;n</th>
            <th scope="col">Fecha Ejecuci&oacute;n</th>
            <th scope="col">Estado Servicio</th>
            <th scope="col">Cliente</th>
            <th scope="col"></th>
          </tr>
          </thead>
          <tbody class="admuser">
          <tr *ngFor="let cap of this.caps" class="back-tab-user">
            <td *ngIf="cap.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{cap.idServicio}}a">{{cap.idServicio}}</td>
            <td *ngIf="cap.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{cap.idServicio}}b">{{cap.nombreServicio}}</td>
            <td *ngIf="cap.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{cap.idServicio}}c">{{cap.valorServicio | currency:"CLP"}}</td>
            <td *ngIf="cap.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{cap.idServicio}}d">{{cap.descripcionServicio}}</td>
            <td *ngIf="cap.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{cap.idServicio}}e">{{cap.fechaCreacionServicio | date:"dd-MM-yyyy"}}</td>
            <td *ngIf="cap.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{cap.idServicio}}f">{{cap.fechaBajaServicio | date: "dd-MM-yyyy"}}</td>
            <td *ngIf="cap.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{cap.idServicio}}g">{{cap.estadoServicio}}</td>
            <td *ngIf="cap.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{cap.idServicio}}i">{{cap.idCliente}}</td>
            <td *ngIf="cap.idCliente == this.dataService.clienteObservado.idEmpresa.toString()" id="{{cap.idServicio}}h">
              <svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_78915_12021)">
                  <path d="M17.2241 9.78214C16.8749 9.78214 16.5918 10.0652 16.5918 10.4145V22.3652C16.5918 22.7142 16.8749 22.9976 17.2241 22.9976C17.5734 22.9976 17.8564 22.7142 17.8564 22.3652V10.4145C17.8564 10.0652 17.5734 9.78214 17.2241 9.78214Z" fill="#17B1E7"/>
                  <path d="M9.76318 9.78214C9.41392 9.78214 9.13086 10.0652 9.13086 10.4145V22.3652C9.13086 22.7142 9.41392 22.9976 9.76318 22.9976C10.1124 22.9976 10.3955 22.7142 10.3955 22.3652V10.4145C10.3955 10.0652 10.1124 9.78214 9.76318 9.78214Z" fill="#17B1E7"/>
                  <path d="M4.32518 8.03808V23.617C4.32518 24.5378 4.66283 25.4026 5.25266 26.023C5.83977 26.6452 6.65685 26.9984 7.51196 26.9999H19.4756C20.3309 26.9984 21.148 26.6452 21.7349 26.023C22.3247 25.4026 22.6624 24.5378 22.6624 23.617V8.03808C23.8349 7.72687 24.5946 6.59413 24.4378 5.391C24.2807 4.18812 23.2559 3.2883 22.0426 3.28805H18.8052V2.49766C18.8089 1.83298 18.5461 1.19474 18.0756 0.725195C17.6051 0.255897 16.9658 -0.00542718 16.3012 6.78727e-06H10.6864C10.0217 -0.00542718 9.38248 0.255897 8.91194 0.725195C8.44141 1.19474 8.17861 1.83298 8.18231 2.49766V3.28805H4.9449C3.73164 3.2883 2.70684 4.18812 2.54975 5.391C2.39291 6.59413 3.15268 7.72687 4.32518 8.03808ZM19.4756 25.7353H7.51196C6.43084 25.7353 5.58981 24.8066 5.58981 23.617V8.09366H21.3977V23.617C21.3977 24.8066 20.5567 25.7353 19.4756 25.7353ZM9.44694 2.49766C9.44274 2.16841 9.57217 1.85151 9.80583 1.61908C10.0392 1.38666 10.3569 1.25896 10.6864 1.26464H16.3012C16.6307 1.25896 16.9483 1.38666 17.1817 1.61908C17.4154 1.85126 17.5448 2.16841 17.5406 2.49766V3.28805H9.44694V2.49766ZM4.9449 4.55269H22.0426C22.6713 4.55269 23.1808 5.06224 23.1808 5.69086C23.1808 6.31947 22.6713 6.82903 22.0426 6.82903H4.9449C4.31629 6.82903 3.80673 6.31947 3.80673 5.69086C3.80673 5.06224 4.31629 4.55269 4.9449 4.55269Z" fill="#17B1E7"/>
                  <path d="M13.4936 9.78214C13.1444 9.78214 12.8613 10.0652 12.8613 10.4145V22.3652C12.8613 22.7142 13.1444 22.9976 13.4936 22.9976C13.8429 22.9976 14.126 22.7142 14.126 22.3652V10.4145C14.126 10.0652 13.8429 9.78214 13.4936 9.78214Z" fill="#17B1E7"/>
                </g>
                <defs>
                  <clipPath id="clip0_78915_12021">
                    <rect width="27" height="27" fill="white"/>
                  </clipPath>
                </defs>
              </svg>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
      <div class="row pt-5">
        <div class="col-12">
          <button class="btn-outline-blue shadow-none float-end" style="width: 205px;" (click)="goHome()">Volver</button>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #agendarCapacitacion>
  <div class="modal-body" style="max-width: 600px; padding: 45px 45px 30px 45px; overflow-y: auto;">
    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
          <p class="title left pb-3">Capacitacion #{{this.dataService.listCaps.length + 1}}<br>
          Profesional Asignado: {{this.dataService.clienteObservado.responsableEmpresa}}
          </p>
          <mat-form-field class="left" style="width: 100%">
            <mat-label>Fecha Capacitaci&oacute;n</mat-label>
            <input matInput [matDatepicker]="dp3" [formControl]="feccap" [disabled]="true">
            <mat-datepicker-toggle matIconSuffix [for]="dp3"></mat-datepicker-toggle>
            <mat-datepicker #dp3 disabled="false" color="accent"></mat-datepicker>
          </mat-form-field>
          <div class="row">
            <div class="col-6">
              <p>AÃ±adir Asistentes
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" (click)="agregarAsistente()" style="cursor: pointer;">
                  <path d="M12 0.375C5.57812 0.375 0.375 5.57812 0.375 12C0.375 18.4219 5.57812 23.625 12 23.625C18.4219 23.625 23.625 18.4219 23.625 12C23.625 5.57812 18.4219 0.375 12 0.375ZM18.75 13.3125C18.75 13.6219 18.4969 13.875 18.1875 13.875H13.875V18.1875C13.875 18.4969 13.6219 18.75 13.3125 18.75H10.6875C10.3781 18.75 10.125 18.4969 10.125 18.1875V13.875H5.8125C5.50313 13.875 5.25 13.6219 5.25 13.3125V10.6875C5.25 10.3781 5.50313 10.125 5.8125 10.125H10.125V5.8125C10.125 5.50313 10.3781 5.25 10.6875 5.25H13.3125C13.6219 5.25 13.875 5.50313 13.875 5.8125V10.125H18.1875C18.4969 10.125 18.75 10.3781 18.75 10.6875V13.3125Z" fill="#17B1E7"/>
                </svg>
              </p>
            </div>
            <div class="col-6">
              <p>Quitar Asistentes
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" (click)="asistentes.splice(asistentes.length - 1, 1)" style="cursor: pointer">
                  <path d="M18 6L6 18" stroke="#17B1E7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M6 6L18 18" stroke="#17B1E7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </p>
            </div>
          </div>
          <div class="form-group pb-5" style="max-height: 250px; overflow-y: auto">
            <div class="row" *ngFor="let as of this.asistentes; index as i;">
              <div class="col-6">
                <label for="as{{i}}">Asistente {{i + 1}}</label>
                <div class="input-wrapper">
                  <input type="text" class="input-login mb-2" id="as{{i}}" name="as{{i}}" [(ngModel)]="asistentes[i].nombre"/>
                </div>
              </div>
              <div class="col-6">
                <label for="rs{{i}}">Rut {{i + 1}}</label>
                <div class="input-wrapper">
                  <input type="text" class="input-login mb-2" id="rs{{i}}" name="rs{{i}}"/>
                </div>
              </div>
            </div>
          </div>
          <div class="form-group pb-5">
            <label for="matu">Material</label>
            <div class="input-wrapper">
              <textarea class="input-login mb-2" id="matu" name="matu" style="height: 120px" [value]="materiales" (change)="updateMats($event)">{{materiales}}</textarea>
            </div>
          </div>
          <div class="form-group pb-5">
            <label for="val">Valor</label>
            <div class="input-wrapper">
              <input type="number" class="input-login mb-2" id="val" name="val" min="0" [(ngModel)]="cap.valorServicio" />
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 col-12 order-2 order-md-1">
          <button type="button" class="btn-outline-blue"  style="max-width: 208px" (click)="closeDialog()">Volver</button>
        </div>
        <div class="col-md-6 col-12 order-1 order-md-2">
          <button type="button" class="btn-blue" style="max-width: 208px" (click)="createCap()">Crear Capacitaci&oacute;n</button>
        </div>
      </div>

    </div>
  </div>
</ng-template>
<ng-template #agendarVisita>
  <div class="modal-body" style="max-width: 600px; padding: 45px 45px 30px 45px; overflow-y: auto;">
    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
          <p class="title left pb-3">Visita #{{this.dataService.listVisits.length + 1}}<br>
          Profesional Asignado: {{this.dataService.clienteObservado.responsableEmpresa}}
          </p>
          <mat-form-field class="left" style="width: 100%">
            <mat-label>Fecha Visita</mat-label>
            <input matInput [matDatepicker]="dp3" [formControl]="fecvis" [disabled]="true">
            <mat-datepicker-toggle matIconSuffix [for]="dp3"></mat-datepicker-toggle>
            <mat-datepicker #dp3 disabled="false" color="accent"></mat-datepicker>
          </mat-form-field>
          <div class="form-group pb-5">
            <label for="desc">Descripci&oacute;n Visita</label>
            <div class="input-wrapper">
              <textarea class="input-login mb-2" id="desc" name="desc" style="height: 120px" [value]="desc" (change)="updateDesc($event)">{{desc}}</textarea>
            </div>
          </div>
          <div class="form-group pb-5">
            <label for="val">Valor</label>
            <div class="input-wrapper">
              <input type="number" class="input-login mb-2" id="val2" name="val2" min="0" [(ngModel)]="vst.valor" />
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 col-12 order-2 order-md-1">
          <button type="button" class="btn-outline-blue"  style="max-width: 208px" (click)="closeDialog()">Volver</button>
        </div>
        <div class="col-md-6 col-12 order-1 order-md-2">
          <button type="button" class="btn-blue" style="max-width: 208px" (click)="createVisit()">Crear Visita</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #warnContrato>
  <div class="modal-body" style="max-width: 600px; padding: 45px 45px 30px 45px; overflow-y: auto;">
    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
          <p style="font-weight: bolder">Se generarÃ¡ el cobro del contrato <span style="color: #17B1E7"> {{cnt.idContrato}}</span></p>
          <p style="font-weight: bolder">Con {{vsts.length}} Visitas y {{caps.length}} Capacitaciones por un total de: {{total | currency: "CLP"}}</p>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <button type="button" class="btn-blue" style="max-width: 208px" (click)="closeContract(cnt)">Entendido</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #crearContrato>
  <div class="modal-body" style="max-width: 600px; padding: 45px 45px 30px 45px; overflow-y: auto;">
    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
          <p class="title left pb-3">Contrato #{{this.dataService.listContracts.length + 1}}<br>
          Profesional Asignado: {{this.dataService.clienteObservado.responsableEmpresa}}
          </p>
          <mat-form-field class="left" style="width: 100%">
            <mat-label>Fecha Contrato</mat-label>
            <input matInput [matDatepicker]="dp4" [formControl]="feccon" [disabled]="true">
            <mat-datepicker-toggle matIconSuffix [for]="dp4"></mat-datepicker-toggle>
            <mat-datepicker #dp4 disabled="false" color="accent"></mat-datepicker>
          </mat-form-field>
          <div class="form-group pb-5">
            <label for="vis">Cantidad Visitas</label>
            <div class="input-wrapper">
              <input type="number" class="input-login mb-2" id="vis" name="vis" min="0" [(ngModel)]="this.cnt.cantidadVisita" />
            </div>
          </div>
          <div class="form-group pb-5">
            <label for="ser">Cantidad Servicios</label>
            <div class="input-wrapper">
              <input type="number" class="input-login mb-2" id="ser" name="ser" min="0" [(ngModel)]="this.cnt.cantidadServicio" />
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 col-12 order-2 order-md-1">
          <button type="button" class="btn-outline-blue"  style="max-width: 208px" (click)="closeDialog()">Volver</button>
        </div>
        <div class="col-md-6 col-12 order-1 order-md-2">
          <button type="button" class="btn-blue" style="max-width: 208px" (click)="createContract()">Crear Contrato</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #crearChecklist>
  <div class="modal-body" style="max-width: 600px; padding: 45px 45px 30px 45px; overflow-y: auto;">
    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
          <div class="list justify-content-center">
            <h2>Checklist Visita #{{this.vst.idVisita}}
              <svg height="27" width="27" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                   viewBox="0 0 370.32 370.32" xml:space="preserve" (click)="exportChecklist(this.chks)" style="cursor: pointer; alignment: right">
<g>
	<path style="fill:#ffffff;" d="M148.879,85.993H95.135c-8.284,0-15,6.716-15,15c0,8.284,6.716,15,15,15h53.744
		c8.284,0,15-6.716,15-15C163.879,92.709,157.163,85.993,148.879,85.993z"/>
  <path style="fill:#ffffff;" d="M148.879,148.327H95.135c-8.284,0-15,6.716-15,15c0,8.284,6.716,15,15,15h53.744
		c8.284,0,15-6.716,15-15C163.879,155.043,157.163,148.327,148.879,148.327z"/>
  <path style="fill:#ffffff;" d="M211.944,253.354v14.608h7.717c9.359,0,9.359-5.599,9.359-7.439c0-1.775,0-7.17-9.359-7.17H211.944z
		"/>
  <path style="fill:#ffffff;" d="M325.879,225.752h-24.41V73.703c0-3.934-1.56-7.705-4.344-10.484l-58.876-58.88
		C235.465,1.561,231.699,0,227.765,0H50.58C34.527,0,21.469,13.059,21.469,29.112v312.095c0,16.054,13.059,29.113,29.111,29.113
		h221.777c16.052,0,29.111-13.06,29.111-29.113v-30.048h24.41c12.687,0,22.973-10.285,22.973-22.973v-39.462
		C348.852,236.038,338.566,225.752,325.879,225.752z M269.855,337.906H53.082V32.414H207.17V75.99
		c0,10.555,8.554,19.107,19.105,19.107h43.58v130.655h-74.178c-12.688,0-22.973,10.286-22.973,22.973v39.462
		c0,12.688,10.285,22.973,22.973,22.973h74.178V337.906z M238.51,260.523c0,10.441-7.224,16.928-18.85,16.928h-7.717v8.977
		c0,2.316-1.877,4.197-4.195,4.197h-1.097c-2.319,0-4.197-1.881-4.197-4.197v-38.366c0-2.316,1.878-4.197,4.197-4.197h13.009
		C231.287,243.864,238.51,250.246,238.51,260.523z M262.305,290.625H247.21c-2.319,0-4.197-1.881-4.197-4.197v-38.366
		c0-2.316,1.877-4.197,4.197-4.197h15.095c13.148,0,23.845,10.5,23.845,23.409C286.15,280.15,275.454,290.625,262.305,290.625z
		 M322.455,249.156c0,2.32-1.878,4.197-4.197,4.197h-17.045v10.053h14.521c2.317,0,4.197,1.875,4.197,4.195v1.099
		c0,2.316-1.88,4.197-4.197,4.197h-14.521v13.53c0,2.316-1.877,4.197-4.196,4.197h-1.096c-2.32,0-4.197-1.881-4.197-4.197v-38.366
		c0-2.316,1.877-4.197,4.197-4.197h22.337c2.319,0,4.197,1.881,4.197,4.197V249.156z"/>
  <path style="fill:#ffffff;" d="M262.305,253.354h-9.803v27.782h9.803c7.915,0,14.355-6.222,14.355-13.862
		C276.661,259.598,270.221,253.354,262.305,253.354z"/>
</g>
</svg>
            </h2>
            <ul style="max-height: 350px; overflow-y: auto">
              <li *ngFor="let item of this.chks; let i = index">
                <label>
                  <input type="checkbox">
                    <p style="margin-top: 16px" [ngClass]="{'checked': item.estadoChecklist ==='A'}">{{ item.nombreChecklist }}</p>
                    <span></span>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" (click)="removeChecklist(i)" style="cursor: pointer">
                      <path d="M18 6L6 18" stroke="#17B1E7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <path d="M6 6L18 18" stroke="#17B1E7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </label>
              </li>
            </ul>
            <form>
              <div class="form-group pb-5">
                <div class="input-wrapper" style="padding-left: 1rem; padding-right: 1rem;">
                  <input type="text" class="input-login mb-2" placeholder="Nuevo item" name="newItem" [(ngModel)]="newChecklistItem">
                </div>
              </div>
              <button type="button" class="btn-green shadow-none mb-2" (click)="this.addChecklist()">Agregar Item</button>
            </form>
          </div>
        </div>
      </div>
      <div class="row pt-2">
        <div class="col-md-6 col-12 order-2 order-md-1">
          <button type="button" class="btn-outline-blue"  style="max-width: 208px" (click)="closeDialog(); emptyChecklist()">Volver</button>
        </div>
        <div class="col-md-6 col-12 order-1 order-md-2">
          <button type="button" class="btn-blue" style="max-width: 208px" (click)="saveChecklist();" >Crear Checklist</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>

